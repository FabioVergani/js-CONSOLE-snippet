(function(testo){
 function f(x){return('0'+parseInt(x).toString(16)).slice(-2)}
 
 function r(s,r,g,b){
	var s=f(b);
	const m=['#',f(r),f(g),s],i=s[1];
	if(i===s[0]){
		s=m[2];
		const e=s[1];
		if(e===s[0]){
			s=m[1];
			const h=s[1];
			if(h===s[0]){
				m[1]=h;
				m[2]=e;
				m[3]=i
			}
		}
	};
	return m.join('');
 }
 
 const p=/rgb\((\d+),\s*(\d+),\s*(\d+)\s*\)/g;
 var s=testo.replace(p,r);
 console.log(s);

})('rgb(0, 0, 0) ,rgb(0,82,0) ');
//
